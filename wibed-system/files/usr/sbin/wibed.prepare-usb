#!/bin/sh

DEVICE=${1:-"/dev/sdb"}

[ -b $DEVICE ] || { echo "$DEVICE could not be found. Aborting."; exit 1; }

grep ^$DEVICE /proc/mounts && { echo "$DEVICE mounted. Aborting."; exit 2; }

sfdisk -L -q $DEVICE << EOF
,,L
EOF

mkfs.ext4 -L "wibed-usb-overlay" ${DEVICE}1 || { echo "Partitioning $DEVICE failed."; exit 3; }

exit 0

